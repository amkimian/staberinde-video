<!DOCTYPE html>
<head>
    <script type="text/javascript" src="https://unpkg.com/lodash"></script>
    <script type="text/javascript" src="https://unpkg.com/butterchurn"></script>
    <script
            src="https://code.jquery.com/jquery-3.1.1.min.js"
            integrity="sha256-hVVnYaiADRTO2PzUGmuLJr8BLUSjGIZsDYGmIJLv2b8="
            crossorigin="anonymous"></script>

    <style>
        #canvas:fullscreen {
          width: 100%;
          height: 100%;
        }
    </style>
    <link rel="stylesheet" href="https://unpkg.com/normalize.css/normalize.css" />

    <script>
        console.log("Script running");
        window.startUp = () => {
          console.log("Start script load function");
          const canvas = document.getElementById('canvas');
          const visualizer = butterchurn.default.createVisualizer(null, canvas , {
            width: 1920,
            height: 1080,
            meshWidth: 64,
            meshHeight: 48,
            pixelRatio: 1,
            textureRatio: 2,
          });

          // Add blend time to this
          window.loadPreset = (preset, blend) => {
            console.log("Preset loading " + JSON.stringify(preset));
            visualizer.loadPreset(preset, blend);
          }

        /*
          window.launchSongTitleAnim = (text) => {
            visualizer.launchSongTitleAnim(text);
          }
        */
          window.render = (opts) => {
            visualizer.render(opts);
          }
        };
    </script>
</head>
<body>
<div>
    <canvas id='canvas' width='${width}' height='${height}'></canvas>
</div>
</body>
</html>